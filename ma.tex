\newcommand{\MState}[2]{{#1}\mathrel{\parallel}{#2}}
\newcommand{\RState}[3]{\mathop{\nu}{#2}\,\braces{\,{#1}\mathrel{\parallel}{#3}\,}}

\newcommand{\cmdtyabt}{\kw{cmd}}
\newcommand{\cmdtycst}{\kw{cmd}}
\newcommand{\gcmdtyabt}[1]{\OpABT{\kw{cmd}}{#1}}
\newcommand{\gcmdtycst}[1]{{#1}\,\kw{cmd}}

\newcommand{\cmdabt}[1]{\OpABT{\kw{cmd}}{#1}}
\newcommand{\cmdcst}[1]{\kwop{cmd}{#1}}
\newcommand{\tcmdabt}[2]{\OpABTp{\kw{cmd}}{#1}{#2}}
\newcommand{\tcmdcst}[2]{\tcmdabt{#1}{#2}}

\newcommand{\retcmdabt}[1]{\OpABT{\kw{ret}}{#1}}
\newcommand{\retcmdcst}[1]{\kwop{ret}{#1}}
\newcommand{\tretcmdabt}[2]{\OpABTp{\kw{ret}}{#1}{#2}}
\newcommand{\tretcmdcst}[2]{\retcmdcst{#2}}
\newcommand{\seqcmdabt}[3]{\OpABT{\kw{bnd}}{#1;\AbsABT{#2}{#3}}}
\newcommand{\seqcmdcst}[3]{\kwop{bnd}{#2}\mathbin{\leftarrow}{#1}\kwbin{;}{#3}}
\newcommand{\tseqcmdabt}[4]{\OpABTp{\kw{bnd}}{#1}{#2;\AbsABT{#3}{#4}}}
\newcommand{\tseqcmdcst}[4]{\seqcmdcst{#2}{#3}{#4}}

\newcommand{\newvarabt}[3]{\OpABT{\kw{dcl}}{#1;\SymABT{#2}{#3}}}
\newcommand{\newvarcst}[3]{\kwop{dcl}{#2}\kwbin{:=}{#1}\kwbin{in}{#3}}
\newcommand{\tnewvarabt}[4]{\OpABTp{\kw{dcl}}{#1}{#2;\SymABT{#3}{#4}}}
\newcommand{\tnewvarcst}[4]{\newvarcst{#2}{#3}{#4}}
\newcommand{\setvarabt}[2]{\OpABT{\OpInst{\kw{set}}{#1}}{#2}}
\newcommand{\setvarcst}[2]{{#1}\kwbin{:=}{#2}}
\newcommand{\getvarabt}[1]{\OpInst{\kw{get}}{#1}}
\newcommand{\getvarcst}[1]{\mathop{\cdatsign}\nolimits{#1}}
\newcommand{\skipcmdabt}{\kw{ret}}
\newcommand{\skipcmdcst}{\skipcmdabt}
\newcommand{\ifzcmdabt}[3]{\OpABT{\kw{ifz}}{{#1};{#2};{#3}}}
\newcommand{\ifzcmdcst}[3]{\kwop{ifz}\cdparens{#1}\,{#2}\kwbin{else}{#3}}
\newcommand{\whilecmdabt}[2]{\OpABT{\kw{while}}{#1;#2}}
\newcommand{\whilecmdcst}[2]{\kwop{while}\cdparens{#1}\,{#2}}

% procedures
\newcommand{\proctyabt}[2]{\parrtyabt{#1}{\gcmdtyabt{#2}}}
\newcommand{\proctycst}[2]{\parrtycst{#1}{\gcmdtycst{#2}}}
\newcommand{\procabt}[3]{\OpABTp{\rho}{#1}{\AbsABT{#2}{#3}}}
\newcommand{\proccst}[3]{\kwop{proc}\cdparens{{#2}\cdcolon{#1}}\,{#3}}
\newcommand{\callcmdabt}[2]{\OpABT{#1;#2}}
\newcommand{\callcmdcst}[2]{\kwop{call}{#1}\cdparens{#2}}
\newcommand{\runcmdabt}[1]{\OpABT{\kw{do}}{#1}}
\newcommand{\runcmdcst}[1]{\kwop{do}{#1}}

% call-by-reference
\newcommand{\cbrtyabt}[2]{\OpABT{\kw{cbr}}{#1;#2}}
\newcommand{\cbrtycst}[2]{{#1}\mathbin{\Rightarrow}{#2}}
\newcommand{\procrabt}[3]{\OpABTp{\rho}{#1}{\SymABT{#2}{#3}}}
\newcommand{\procrcst}[3]{\mathop{\rho}\cdparens{{#2}\cdcolon{#1}}\,{#3}}
\newcommand{\cbrcmdabt}[2]{\OpABT{\kw{cbr}}{#1;#2}}
\newcommand{\cbrcmdcst}[2]{{#1}\cdparens{#2}}

\newcommand{\procdeclcmdcst}[6]{\kwop{proc}{#1}\IsOf{\cdparens{\IsOf{#2}{#3}}}{#4}\kwbin{is}{#5}\kwbin{in}{#6}}
\newcommand{\owncmdcst}[3]{\kwop{own}{#1}\kwbin{:=}{#2}\kwbin{in}{#3}}

\newcommand{\captyabt}[1]{\OpABT{\kw{cap}}{#1}}
\newcommand{\captycst}[1]{{#1}\,\kw{cap}}

\newcommand{\reftyabt}[1]{\OpABT{\kw{ref}}{#1}}
\newcommand{\reftycst}[1]{{#1}\,\kw{ref}}
\newcommand{\refexabt}[1]{\OpInst{\kw{ref}}{#1}}
\newcommand{\refexcst}[1]{\mathord{\cdamper}{#1}}
\newcommand{\refnewabt}[2]{\OpABT{\OpInst{\kw{newref}}{#1}}{#2}}
\newcommand{\refnewcst}[2]{\kwop{ref}{#2}}
\newcommand{\refgetabt}[1]{\OpABT{\kw{getref}}{#1}}
\newcommand{\refgetcst}[1]{\mathop{\cdstar}\nolimits{#1}}
\newcommand{\refsetabt}[2]{\OpABT{\kw{setref}}{#1;#2}}
\newcommand{\refsetcst}[2]{{#1}\kwop{{\cdstar}{=}}{#2}}
\newcommand{\refsetplus}[2]{{#1}\kwop{+=}{#2}}

\newcommand{\optreftycst}[1]{\opttycst{\reftycst{#1}}}

\newcommand{\blockcmdcst}[1]{\cdbraces{#1}}
\newcommand{\semicmdcst}[3]{{#2}\mathbin{\leftarrow}{#1}\kwbin{;}{#3}}
\newcommand{\psemicmdcst}[2]{{#1}\kwbin{;}{#2}}
\newcommand{\bsemicmdcst}[3]{\blockcmdcst{\semicmdcst{#1}{#2}{#3}}}
\newcommand{\pbsemicmdcst}[2]{\blockcmdcst{{#1}\kwbin{;}{#2}}}
\newcommand{\doblockcst}[1]{\cmdcst{\blockcmdcst{#1}}}

\newcommand{\doexpcst}[1]{\kwop{do}\blockcmdcst{#1}}
\newcommand{\IsPassive}[1]{\JPost{#1}{\textsf{passive}}}

\newcommand{\MAKCEval}[3]{{#2}\mathrel{\triangleright_{#1}}{#3}}
\newcommand{\MAKCRet}[3]{{#2}\mathrel{\triangleleft_{#1}}{#3}}
\newcommand{\MAKSEval}[4]{\MState{#2}{#3}\mathrel{\triangleright_{#1}}{#4}}
\newcommand{\MAKSRet}[4]{\MState{#2}{#3}\mathrel{\triangleleft_\Sigma}{#4}}

\newcommand{\newarrcst}[4]{\kwop{dcl}{#1}\sqbracks{#2}\kwbin{:=}{#3}\kwbin{in}{#4}}
\newcommand{\arrsizabt}[1]{\OpInst{\kw{siz}}{#1}}
\newcommand{\arrsizcst}[1]{|{#1}|}
\newcommand{\arrgetabt}[2]{\OpABT{\OpInst{\kw{sub}}{#2}}{#1}}
\newcommand{\arrgetcst}[2]{{#1}\sqbracks{#2}}
\newcommand{\arrsetabt}[3]{\OpABT{\OpInst{\kw{upd}}{#2}}{#1;#3}}
\newcommand{\arrsetcst}[3]{{#1}\sqbracks{#2}\kwbin{:=}{#3}}
\newcommand{\arrrefgetabt}[2]{\OpABT{\kw{subref}}{#1;#2}}
\newcommand{\arrrefgetcst}[2]{\mathop{\cdstar}{#1}\sqbracks{#2}}
\newcommand{\arrrefsetabt}[3]{\OpABT{\kw{updref}}{#1}{#2;#3}}
\newcommand{\arrrefsetcst}[3]{{#1}\sqbracks{#2}\kwbin{{*}{=}}{#3}}

%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "book"
%%% End: 
